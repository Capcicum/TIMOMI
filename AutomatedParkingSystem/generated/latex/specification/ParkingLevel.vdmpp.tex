\begin{vdmpp}[breaklines=true]
class ParkingLevel is subclass of GLOBAL

instance variables
 parkingSpots : set of Car := {};
inv forall x,y in set parkingSpots &
 x <> y => x.licensePlate <> y.licensePlate

operations

(*@
\label{parkCar:10}
@*)
public parkCar : Car ==> ()
parkCar(pc) ==
 parkingSpots := parkingSpots union {pc}
pre pc.licensePlate not in set {x.licensePlate | x in set parkingSpots};

(*@
\label{retriveCar:15}
@*)
public retriveCar : LicensePlate ==> Car
retriveCar(plp) == (
 dcl car : Car := getCar(plp);
 removeCar(plp);
 return car);
 
(*@
\label{removeCar:21}
@*)
public removeCar : LicensePlate ==> ()
removeCar(plp) ==
 parkingSpots := parkingSpots \ {getCar(plp)}
pre isCarParked(plp, parkingSpots);

(*@
\label{getCar:26}
@*)
public getCar : LicensePlate ==> Car
getCar(plp) ==
 let Car in set parkingSpots be st Car.licensePlate = plp
 in return Car
pre isCarParked(plp,parkingSpots);

(*@
\label{getParkingSpots:32}
@*)
public getParkingSpots : () ==> set of Car
getParkingSpots() == 
 return parkingSpots;

functions

(*@
\label{isCarParked:38}
@*)
isCarParked: LicensePlate * set of Car -> bool
isCarParked(plpi,pps) ==
 exists Car in set pps & Car.licensePlate = plpi

end ParkingLevel
\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[getCar:26]{getCar} & 26&100.0\% & 138 \\
\hline
\hyperref[getParkingSpots:32]{getParkingSpots} & 32&100.0\% & 5 \\
\hline
\hyperref[isCarParked:38]{isCarParked} & 38&100.0\% & 206 \\
\hline
\hyperref[parkCar:10]{parkCar} & 10&100.0\% & 80 \\
\hline
\hyperref[removeCar:21]{removeCar} & 21&100.0\% & 68 \\
\hline
\hyperref[retriveCar:15]{retriveCar} & 15&100.0\% & 66 \\
\hline
\hline
ParkingLevel.vdmpp & & 100.0\% & 563 \\
\hline
\end{longtable}

