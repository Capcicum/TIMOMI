\begin{vdmpp}[breaklines=true]
class ParkingLevelTest is subclass of TestCase, GLOBAL

values
car1 : Car = mk_Car(mk_LicensePlate(<Danish>, "PT", 49000), true); 
car2 : Car = mk_Car(mk_LicensePlate(<Danish>, "PT", 49001), true); 
operations 

(*@
\label{runTest:8}
@*)
protected runTest : () ==> ()
runTest() == 
 (parkCarTest();
  removeCarTest();
  getCarTest();
  retriveCarTest(););
 
(*@
\label{parkCarTest:15}
@*)
protected parkCarTest : () ==> ()
parkCarTest() == (
 dcl parkingLevel : ParkingLevel := new ParkingLevel();
 parkingLevel.parkCar(car1);
 assertTrue(card parkingLevel.getParkingSpots() = 1);
 parkingLevel.parkCar(car2);
 assertTrue(parkingLevel.getCar(car1.licensePlate).licensePlate = car1.licensePlate);
 assertTrue(parkingLevel.getCar(car2.licensePlate) = car2);
 assertTrue(card parkingLevel.getParkingSpots() = 2););

(*@
\label{removeCarTest:25}
@*)
protected removeCarTest : () ==> ()
removeCarTest() == (
 dcl parkingLevel : ParkingLevel := new ParkingLevel();
 parkingLevel.parkCar(car1);
 parkingLevel.parkCar(car2);
 assertTrue(card parkingLevel.getParkingSpots() = 2);
 parkingLevel.removeCar(car1.licensePlate);
 parkingLevel.removeCar(car2.licensePlate); 
 assertTrue(card parkingLevel.getParkingSpots() = 0););

(*@
\label{getCarTest:35}
@*)
protected getCarTest : () ==> ()
getCarTest() == (
 dcl parkingLevel : ParkingLevel := new ParkingLevel();
 parkingLevel.parkCar(car1);
 parkingLevel.parkCar(car2);
 assertTrue(is_Car(parkingLevel.getCar(car1.licensePlate)));
 assertTrue(is_Car(parkingLevel.getCar(car2.licensePlate))););

(*@
\label{retriveCarTest:43}
@*)
protected retriveCarTest : () ==> ()
retriveCarTest() == (
 dcl parkingLevel : ParkingLevel := new ParkingLevel();
 parkingLevel.parkCar(car1);
 parkingLevel.parkCar(car2);
 assertTrue(is_Car(parkingLevel.retriveCar(car1.licensePlate)));
 assertTrue(is_Car(parkingLevel.retriveCar(car2.licensePlate)));
 assertTrue(card parkingLevel.getParkingSpots() = 0););

end ParkingLevelTest
\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[getCarTest:35]{getCarTest} & 35&100.0\% & 1 \\
\hline
\hyperref[parkCarTest:15]{parkCarTest} & 15&100.0\% & 1 \\
\hline
\hyperref[removeCarTest:25]{removeCarTest} & 25&100.0\% & 1 \\
\hline
\hyperref[retriveCarTest:43]{retriveCarTest} & 43&100.0\% & 1 \\
\hline
\hyperref[runTest:8]{runTest} & 8&100.0\% & 1 \\
\hline
\hline
ParkingLevelTest.vdmpp & & 100.0\% & 5 \\
\hline
\end{longtable}

