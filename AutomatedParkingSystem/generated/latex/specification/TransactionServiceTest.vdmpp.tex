\begin{vdmpp}[breaklines=true]
class TransactionServiceTest is subclass of TestCase, GLOBAL

values
car1 : Car = mk_Car(mk_LicensePlate(<Danish>, "PT", 49000), true); 

payInfo_cred1 : PaymentInfo = [1,2,3,4,5,6];
payInfo_park1 : PaymentInfo = ['p','0','0','0','0','1'];

parkingTime : real = 1;

operations
(*@
\label{runTest:12}
@*)
protected runTest : () ==> ()
runTest() == 
 (calculateParkingFeeTest();
  parkingRateDBTest());
 
(*@
\label{parkingRateDBTest:17}
@*)
protected parkingRateDBTest : () ==> ()
parkingRateDBTest() == (
 dcl transactionService : TransactionService := new TransactionService();
 assertTrue(transactionService.parkingRateDB(<Danish>) = 5);
 assertTrue(transactionService.parkingRateDB(<European>) = 10);
 assertTrue(transactionService.parkingRateDB(<Other>) = 15););

(*@
\label{calculateParkingFeeTest:24}
@*)
protected calculateParkingFeeTest : () ==> ()
calculateParkingFeeTest() == (
 dcl transactionService : TransactionService := new TransactionService();
 World`timeRef.stepTime();
 World`timeRef.stepTime();
 World`timeRef.stepTime();
 World`timeRef.stepTime();
 World`timeRef.stepTime();
 assertTrue(transactionService.calculateParkingFee(car1.licensePlate, payInfo_cred1, parkingTime) = 20);
 assertTrue(transactionService.calculateParkingFee(car1.licensePlate, payInfo_park1, parkingTime) = 0););



end TransactionServiceTest

\end{vdmpp}
\bigskip
\begin{longtable}{|l|r|r|r|}
\hline
Function or operation & Line & Coverage & Calls \\
\hline
\hline
\hyperref[calculateParkingFeeTest:24]{calculateParkingFeeTest} & 24&100.0\% & 1 \\
\hline
\hyperref[parkingRateDBTest:17]{parkingRateDBTest} & 17&100.0\% & 1 \\
\hline
\hyperref[runTest:12]{runTest} & 12&100.0\% & 1 \\
\hline
\hline
TransactionServiceTest.vdmpp & & 100.0\% & 3 \\
\hline
\end{longtable}

